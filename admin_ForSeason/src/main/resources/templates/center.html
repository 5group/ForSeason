<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Dashboard</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
            <div class="btn-group me-2">
                <button type="button" class="btn btn-sm btn-outline-secondary">내보내기</button>
                <button type="button" class="btn btn-sm btn-outline-secondary">가져오기</button>
            </div>
            <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
                <span data-feather="calendar" class="align-text-bottom"></span>
                이번주
            </button>
        </div>
    </div>
    Start<input type="date" name="startDay">
    ~End<input type="date" name="endDay">
    <button id="btn">데이터 보기</button>
    <div id="myChart">

    </div>

    <h2>최근 주문내역</h2>
    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead>
            <tr>
                <td>유저 번호</td>
                <td>수령인</td>
                <td>배송지</td>
                <td>아이템/사이즈/색상</td>
                <td>결제량</td>
                <td>결제날짜</td>
                <td>현재 재고량</td>
            </tr>
            </thead>
            <tbody>
            <tr th:each="stock:${stockList}">
                <td th:text="${stock.getUser_no()}"></td>
                <td th:text="${stock.getShip_cust()}"></td>
                <td th:text="${stock.getShip_addr()}"></td>
                <td th:text="|${stock.getItem_name()}/${stock.getSize_name()}/${stock.getColor_name()}|"></td>
                <td th:text="|${stock.getOrder_tot()} 원|"></td>
                <td th:text="${#dates.format(stock.getOrder_udate(), 'yyyy-MM-dd HH:mm:ss')}"></td>
                <td th:text="${stock.getAmount()}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</main>
<script>
    $(document).ready(function () {
        $('#btn').click(function () {
            var sm = $('input[name="startDay"]').val();
            var em = $('input[name="endDay"]').val();
            if (sm >= em) {
                alert('다시 입력 하세요');
                return;
            }
            getdata(sm, em);
        });
    });

    function getdata(sm, em) {
        console.log("test");
        $.ajax({
            url: "[[@{/stockList}]]",
            data: {'sm': sm, 'em': em, 'index': 0, 'name': "null"},
            success: function (data) {
                displaychart(data);
            }
        });
    };
</script>
